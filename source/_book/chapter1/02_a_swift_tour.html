<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>Swift 初见 | 2.0 新的开始</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../chapter1/03_revision_history.html" />
    
    
    <link rel="prev" href="../chapter1/01_swift.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="1.2" data-basepath=".." data-revision="1467786879222">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="chapter1/chapter1.html">
            
                
                    <a href="../chapter1/chapter1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         欢迎使用 Swift
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="chapter1/01_swift.html">
            
                
                    <a href="../chapter1/01_swift.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         关于 Swift
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="1.2" data-path="chapter1/02_a_swift_tour.html">
            
                
                    <a href="../chapter1/02_a_swift_tour.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         Swift 初见
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="chapter1/03_revision_history.html">
            
                
                    <a href="../chapter1/03_revision_history.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         Swift 版本历史记录
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4" data-path="v1.0.html">
            
                
                    <a href="../v1.0.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                         Swift 1.0 发布内容
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="chapter2/chapter2.html">
            
                
                    <a href="../chapter2/chapter2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Swift 教程
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="chapter2/01_The_Basics.html">
            
                
                    <a href="../chapter2/01_The_Basics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         基础部分
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="chapter2/02_Basic_Operators.html">
            
                
                    <a href="../chapter2/02_Basic_Operators.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         基本运算符
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="chapter2/03_Strings_and_Characters.html">
            
                
                    <a href="../chapter2/03_Strings_and_Characters.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         字符串和字符
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="chapter2/04_Collection_Types.html">
            
                
                    <a href="../chapter2/04_Collection_Types.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         集合类型
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5" data-path="chapter2/05_Control_Flow.html">
            
                
                    <a href="../chapter2/05_Control_Flow.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                         控制流
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.6" data-path="chapter2/06_Functions.html">
            
                
                    <a href="../chapter2/06_Functions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                         函数
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.7" data-path="chapter2/07_Closures.html">
            
                
                    <a href="../chapter2/07_Closures.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                         闭包
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.8" data-path="chapter2/08_Enumerations.html">
            
                
                    <a href="../chapter2/08_Enumerations.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                         枚举
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.9" data-path="chapter2/09_Classes_and_Structures.html">
            
                
                    <a href="../chapter2/09_Classes_and_Structures.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.9.</b>
                        
                         类和结构体
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.10" data-path="chapter2/10_Properties.html">
            
                
                    <a href="../chapter2/10_Properties.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.10.</b>
                        
                         属性
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.11" data-path="chapter2/11_Methods.html">
            
                
                    <a href="../chapter2/11_Methods.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.11.</b>
                        
                         方法
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.12" data-path="chapter2/12_Subscripts.html">
            
                
                    <a href="../chapter2/12_Subscripts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.12.</b>
                        
                         下标
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.13" data-path="chapter2/13_Inheritance.html">
            
                
                    <a href="../chapter2/13_Inheritance.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.13.</b>
                        
                         继承
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.14" data-path="chapter2/14_Initialization.html">
            
                
                    <a href="../chapter2/14_Initialization.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.14.</b>
                        
                         构造过程
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.15" data-path="chapter2/15_Deinitialization.html">
            
                
                    <a href="../chapter2/15_Deinitialization.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.15.</b>
                        
                         析构过程
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.16" data-path="chapter2/16_Automatic_Reference_Counting.html">
            
                
                    <a href="../chapter2/16_Automatic_Reference_Counting.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.16.</b>
                        
                         自动引用计数
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.17" data-path="chapter2/17_Optional_Chaining.html">
            
                
                    <a href="../chapter2/17_Optional_Chaining.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.17.</b>
                        
                         可选链
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.18" data-path="chapter2/18_Error_Handling.html">
            
                
                    <a href="../chapter2/18_Error_Handling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.18.</b>
                        
                         错误处理
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.19" data-path="chapter2/19_Type_Casting.html">
            
                
                    <a href="../chapter2/19_Type_Casting.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.19.</b>
                        
                         类型转换
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.20" data-path="chapter2/20_Nested_Types.html">
            
                
                    <a href="../chapter2/20_Nested_Types.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.20.</b>
                        
                         嵌套类型
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.21" data-path="chapter2/21_Extensions.html">
            
                
                    <a href="../chapter2/21_Extensions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.21.</b>
                        
                         扩展
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.22" data-path="chapter2/22_Protocols.html">
            
                
                    <a href="../chapter2/22_Protocols.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.22.</b>
                        
                         协议
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.23" data-path="chapter2/23_Generics.html">
            
                
                    <a href="../chapter2/23_Generics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.23.</b>
                        
                         泛型
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.24" data-path="chapter2/24_Access_Control.html">
            
                
                    <a href="../chapter2/24_Access_Control.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.24.</b>
                        
                         访问控制
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.25" data-path="chapter2/25_Advanced_Operators.html">
            
                
                    <a href="../chapter2/25_Advanced_Operators.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.25.</b>
                        
                         高级运算符
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> 语言参考</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="chapter3/01_About_the_Language_Reference.html">
            
                
                    <a href="../chapter3/01_About_the_Language_Reference.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         关于语言参考
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2" data-path="chapter3/02_Lexical_Structure.html">
            
                
                    <a href="../chapter3/02_Lexical_Structure.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                         词法结构
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3" data-path="chapter3/03_Types.html">
            
                
                    <a href="../chapter3/03_Types.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                         类型
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.4" data-path="chapter3/04_Expressions.html">
            
                
                    <a href="../chapter3/04_Expressions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                         表达式
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.5" data-path="chapter3/10_Statements.html">
            
                
                    <a href="../chapter3/10_Statements.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                         语句
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.6" data-path="chapter3/05_Declarations.html">
            
                
                    <a href="../chapter3/05_Declarations.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                         声明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.7" data-path="chapter3/06_Attributes.html">
            
                
                    <a href="../chapter3/06_Attributes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                         特性
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.8" data-path="chapter3/07_Patterns.html">
            
                
                    <a href="../chapter3/07_Patterns.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                         模式
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.9" data-path="chapter3/08_Generic_Parameters_and_Arguments.html">
            
                
                    <a href="../chapter3/08_Generic_Parameters_and_Arguments.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                         泛型参数
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.10" data-path="chapter3/09_Summary_of_the_Grammar.html">
            
                
                    <a href="../chapter3/09_Summary_of_the_Grammar.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.10.</b>
                        
                         语法总结
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> 苹果官方Blog官方翻译</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="chapter4/01_Access_Control.html">
            
                
                    <a href="../chapter4/01_Access_Control.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         Access Control 权限控制的黑与白
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="chapter4/02_Type_Custom.html">
            
                
                    <a href="../chapter4/02_Type_Custom.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         造个类型不是梦-白话Swift类型创建
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.3" data-path="chapter4/03_Ballons.html">
            
                
                    <a href="../chapter4/03_Ballons.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                         WWDC里面的那个“大炮打气球”
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.4" data-path="chapter4/04_Interacting_with_C_Pointers.html">
            
                
                    <a href="../chapter4/04_Interacting_with_C_Pointers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                         Swift与C语言指针友好合作
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.5" data-path="chapter4/05_Value_and_Reference_Types.html">
            
                
                    <a href="../chapter4/05_Value_and_Reference_Types.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                         引用类型和值类型的恩怨
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.6" data-path="chapter4/06_Access_Control_and_Protected.html">
            
                
                    <a href="../chapter4/06_Access_Control_and_Protected.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                         访问控制和Protected
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.7" data-path="chapter4/07_Optional_Case_Study.html">
            
                
                    <a href="../chapter4/07_Optional_Case_Study.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                         可选类型完美解决占位问题
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >2.0 新的开始</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_20">
                    
                        <h1 id="swift-a-swift-tour">Swift 初见（A Swift Tour）</h1>
<hr>
<blockquote>
<p>1.0
翻译：<a href="https://github.com/numbbbbb" target="_blank">numbbbbb</a>
校对：<a href="https://github.com/shinyzhu" target="_blank">shinyzhu</a>, <a href="https://github.com/stanzhai" target="_blank">stanzhai</a></p>
<p>2.0
翻译+校对：<a href="https://github.com/xtymichael" target="_blank">xtymichael</a></p>
<p>2.2
翻译：<a href="https://github.com/Brian175" target="_blank">175</a>，2016-04-09 校对：<a href="https://github.com/SketchK" target="_blank">SketchK</a>，2016-05-11</p>
</blockquote>
<p>本页内容包括：</p>
<ul>
<li><a href="#simple_values">简单值（Simple Values）</a></li>
<li><a href="#control_flow">控制流（Control Flow）</a></li>
<li><a href="#functions_and_closures">函数和闭包（Functions and Closures）</a></li>
<li><a href="#objects_and_classes">对象和类（Objects and Classes）</a></li>
<li><a href="#enumerations_and_structures">枚举和结构体（Enumerations and Structures）</a></li>
<li><a href="#protocols_and_extensions">协议和扩展（Protocols and Extensions）</a></li>
<li><a href="#error_handling">错误处理（Error Handling）</a></li>
<li><a href="#generics">泛型（Generics）</a></li>
</ul>
<p>通常来说，编程语言教程中的第一个程序应该在屏幕上打印“Hello, world”。在 Swift 中，可以用一行代码实现：</p>
<pre><code class="lang-swift"><span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, world!"</span>)
</code></pre>
<p>如果你写过 C 或者 Objective-C 代码，那你应该很熟悉这种形式——在 Swift 中，这行代码就是一个完整的程序。你不需要为了输入输出或者字符串处理导入一个单独的库。全局作用域中的代码会被自动当做程序的入口点，所以你也不需要<code>main()</code>函数。你同样不需要在每个语句结尾写上分号。</p>
<p>这个教程会通过一系列编程例子来让你对 Swift 有初步了解，如果你有什么不理解的地方也不用担心——任何本章介绍的内容都会在后面的章节中详细讲解。</p>
<blockquote>
<p>注意：
在 Mac 上，下载 Playground 并双击文件在 Xcode 里打开：<a href="https://developer.apple.com/go/?id=swift-tour" target="_blank">https://developer.apple.com/go/?id=swift-tour</a></p>
</blockquote>
<p><a name="simple_values"></a></p>
<h2 id="">简单值</h2>
<p>使用<code>let</code>来声明常量，使用<code>var</code>来声明变量。一个常量的值，在编译的时候，并不需要有明确的值，但是你只能为它赋值一次。也就是说你可以用常量来表示这样一个值：你只需要决定一次，但是需要使用很多次。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> myVariable = <span class="hljs-number">42</span>
myVariable = <span class="hljs-number">50</span>
<span class="hljs-keyword">let</span> myConstant = <span class="hljs-number">42</span>
</code></pre>
<p>常量或者变量的类型必须和你赋给它们的值一样。然而，你不用明确地声明类型，声明的同时赋值的话，编译器会自动推断类型。在上面的例子中，编译器推断出<code>myVariable</code>是一个整数（integer）因为它的初始值是整数。</p>
<p>如果初始值没有提供足够的信息（或者没有初始值），那你需要在变量后面声明类型，用冒号分割。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> implicitInteger = <span class="hljs-number">70</span>
<span class="hljs-keyword">let</span> implicitDouble = <span class="hljs-number">70.0</span>
<span class="hljs-keyword">let</span> explicitDouble: <span class="hljs-type">Double</span> = <span class="hljs-number">70</span>
</code></pre>
<blockquote>
<p>练习：
创建一个常量，显式指定类型为<code>Float</code>并指定初始值为4。</p>
</blockquote>
<p>值永远不会被隐式转换为其他类型。如果你需要把一个值转换成其他类型，请显式转换。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> label = <span class="hljs-string">"The width is"</span>
<span class="hljs-keyword">let</span> width = <span class="hljs-number">94</span>
<span class="hljs-keyword">let</span> widthLabel = label + <span class="hljs-type">String</span>(width)
</code></pre>
<blockquote>
<p>练习：
删除最后一行中的<code>String</code>，错误提示是什么？</p>
</blockquote>
<p>有一种更简单的把值转换成字符串的方法：把值写到括号中，并且在括号之前写一个反斜杠。例如：</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> apples = <span class="hljs-number">3</span>
<span class="hljs-keyword">let</span> oranges = <span class="hljs-number">5</span>
<span class="hljs-keyword">let</span> appleSummary = <span class="hljs-string">"I have <span class="hljs-subst">\(apples)</span> apples."</span>
<span class="hljs-keyword">let</span> fruitSummary = <span class="hljs-string">"I have <span class="hljs-subst">\(apples + oranges)</span> pieces of fruit."</span>
</code></pre>
<blockquote>
<p>练习：
使用<code>\()</code>来把一个浮点计算转换成字符串，并加上某人的名字，和他打个招呼。</p>
</blockquote>
<p>使用方括号<code>[]</code>来创建数组和字典，并使用下标或者键（key）来访问元素。最后一个元素后面允许有个逗号。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> shoppingList = [<span class="hljs-string">"catfish"</span>, <span class="hljs-string">"water"</span>, <span class="hljs-string">"tulips"</span>, <span class="hljs-string">"blue paint"</span>]
shoppingList[<span class="hljs-number">1</span>] = <span class="hljs-string">"bottle of water"</span>

<span class="hljs-keyword">var</span> occupations = [
    <span class="hljs-string">"Malcolm"</span>: <span class="hljs-string">"Captain"</span>,
    <span class="hljs-string">"Kaylee"</span>: <span class="hljs-string">"Mechanic"</span>,
]
occupations[<span class="hljs-string">"Jayne"</span>] = <span class="hljs-string">"Public Relations"</span>
</code></pre>
<p>要创建一个空数组或者字典，使用初始化语法。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> emptyArray = [<span class="hljs-type">String</span>]()
<span class="hljs-keyword">let</span> emptyDictionary = [<span class="hljs-type">String</span>: <span class="hljs-type">Float</span>]()
</code></pre>
<p>如果类型信息可以被推断出来，你可以用<code>[]</code>和<code>[:]</code>来创建空数组和空字典——就像你声明变量或者给函数传参数的时候一样。</p>
<pre><code class="lang-swift">shoppingList = []
occupations = [:]
</code></pre>
<p><a name="control_flow"></a></p>
<h2 id="">控制流</h2>
<p>使用<code>if</code>和<code>switch</code>来进行条件操作，使用<code>for-in</code>、<code>for</code>、<code>while</code>和<code>repeat-while</code>来进行循环。包裹条件和循环变量括号可以省略，但是语句体的大括号是必须的。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> individualScores = [<span class="hljs-number">75</span>, <span class="hljs-number">43</span>, <span class="hljs-number">103</span>, <span class="hljs-number">87</span>, <span class="hljs-number">12</span>]
<span class="hljs-keyword">var</span> teamScore = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> score <span class="hljs-keyword">in</span> individualScores {
    <span class="hljs-keyword">if</span> score &gt; <span class="hljs-number">50</span> {
        teamScore += <span class="hljs-number">3</span>
    } <span class="hljs-keyword">else</span> {
        teamScore += <span class="hljs-number">1</span>
    }
}
<span class="hljs-built_in">print</span>(teamScore)
</code></pre>
<p>在<code>if</code>语句中，条件必须是一个布尔表达式——这意味着像<code>if score { ... }</code>这样的代码将报错，而不会隐形地与 0 做对比。</p>
<p>你可以一起使用<code>if</code>和<code>let</code>来处理值缺失的情况。这些值可由可选值来代表。一个可选的值是一个具体的值或者是<code>nil</code>以表示值缺失。在类型后面加一个问号来标记这个变量的值是可选的。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> optionalString: <span class="hljs-type">String</span>? = <span class="hljs-string">"Hello"</span>
<span class="hljs-built_in">print</span>(optionalString == <span class="hljs-built_in">nil</span>)

<span class="hljs-keyword">var</span> optionalName: <span class="hljs-type">String</span>? = <span class="hljs-string">"John Appleseed"</span>
<span class="hljs-keyword">var</span> greeting = <span class="hljs-string">"Hello!"</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> name = optionalName {
    greeting = <span class="hljs-string">"Hello, <span class="hljs-subst">\(name)</span>"</span>
}
</code></pre>
<blockquote>
<p>练习：
把<code>optionalName</code>改成<code>nil</code>，greeting会是什么？添加一个<code>else</code>语句，当<code>optionalName</code>是<code>nil</code>时给greeting赋一个不同的值。</p>
</blockquote>
<p>如果变量的可选值是<code>nil</code>，条件会判断为<code>false</code>，大括号中的代码会被跳过。如果不是<code>nil</code>，会将值赋给<code>let</code>后面的常量，这样代码块中就可以使用这个值了。<br>另一种处理可选值的方法是通过使用 ?? 操作符来提供一个默认值。如果可选值缺失的话，可以使用默认值来代替。   </p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> nickName: <span class="hljs-type">String</span>? = <span class="hljs-built_in">nil</span>
<span class="hljs-keyword">let</span> fullName: <span class="hljs-type">String</span> = <span class="hljs-string">"John Appleseed"</span>
<span class="hljs-keyword">let</span> informalGreeting = <span class="hljs-string">"Hi <span class="hljs-subst">\(nickName ?? fullName)</span>"</span>
</code></pre>
<p><code>switch</code>支持任意类型的数据以及各种比较操作——不仅仅是整数以及测试相等。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> vegetable = <span class="hljs-string">"red pepper"</span>
<span class="hljs-keyword">switch</span> vegetable {
<span class="hljs-keyword">case</span> <span class="hljs-string">"celery"</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Add some raisins and make ants on a log."</span>)
<span class="hljs-keyword">case</span> <span class="hljs-string">"cucumber"</span>, <span class="hljs-string">"watercress"</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"That would make a good tea sandwich."</span>)
<span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> x <span class="hljs-keyword">where</span> x.hasSuffix(<span class="hljs-string">"pepper"</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Is it a spicy <span class="hljs-subst">\(x)</span>?"</span>)
<span class="hljs-keyword">default</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Everything tastes good in soup."</span>)
}
</code></pre>
<blockquote>
<p>练习：
删除<code>default</code>语句，看看会有什么错误？</p>
</blockquote>
<p>注意<code>let</code>在上述例子的等式中是如何使用的，它将匹配等式的值赋给常量<code>x</code>。</p>
<p>运行<code>switch</code>中匹配到的子句之后，程序会退出<code>switch</code>语句，并不会继续向下运行，所以不需要在每个子句结尾写<code>break</code>。</p>
<p>你可以使用<code>for-in</code>来遍历字典，需要两个变量来表示每个键值对。字典是一个无序的集合，所以他们的键和值以任意顺序迭代结束。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> interestingNumbers = [
    <span class="hljs-string">"Prime"</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>],
    <span class="hljs-string">"Fibonacci"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>],
    <span class="hljs-string">"Square"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>],
]
<span class="hljs-keyword">var</span> largest = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> (kind, numbers) <span class="hljs-keyword">in</span> interestingNumbers {
    <span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> numbers {
        <span class="hljs-keyword">if</span> number &gt; largest {
            largest = number
        }
    }
}
<span class="hljs-built_in">print</span>(largest)
</code></pre>
<blockquote>
<p>练习：
添加另一个变量来记录现在和之前最大数字的类型。</p>
</blockquote>
<p>使用<code>while</code>来重复运行一段代码直到不满足条件。循环条件也可以在结尾，保证能至少循环一次。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> n = <span class="hljs-number">2</span>
<span class="hljs-keyword">while</span> n &lt; <span class="hljs-number">100</span> {
    n = n * <span class="hljs-number">2</span>
}
<span class="hljs-built_in">print</span>(n)

<span class="hljs-keyword">var</span> m = <span class="hljs-number">2</span>
repeat {
    m = m * <span class="hljs-number">2</span>
} <span class="hljs-keyword">while</span> m &lt; <span class="hljs-number">100</span>
<span class="hljs-built_in">print</span>(m)
</code></pre>
<p>你可以在循环中使用<code>..&lt;</code>来表示范围。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> total = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..&lt;<span class="hljs-number">4</span> {
    total += i
}
<span class="hljs-built_in">print</span>(total)
</code></pre>
<p>使用<code>..&lt;</code>创建的范围不包含上界，如果想包含的话需要使用<code>...</code>。</p>
<p><a name="functions_and_closures"></a></p>
<h2 id="">函数和闭包</h2>
<p>使用<code>func</code>来声明一个函数，使用名字和参数来调用函数。使用<code>-&gt;</code>来指定函数返回值的类型。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">greet</span><span class="hljs-params">(name: String, day: String)</span> -&gt; <span class="hljs-title">String</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello <span class="hljs-subst">\(name)</span>, today is <span class="hljs-subst">\(day)</span>."</span>
}
greet(<span class="hljs-string">"Bob"</span>, day: <span class="hljs-string">"Tuesday"</span>)
</code></pre>
<blockquote>
<p>练习：
删除<code>day</code>参数，添加一个参数来表示今天吃了什么午饭。</p>
</blockquote>
<p>使用元组来让一个函数返回多个值。该元组的元素可以用名称或数字来表示。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">calculateStatistics</span><span class="hljs-params">(scores: [Int])</span> -&gt; <span class="hljs-params">(<span class="hljs-built_in">min</span>: Int, <span class="hljs-built_in">max</span>: Int, sum: Int)</span> </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">min</span> = scores[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">max</span> = scores[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>

    <span class="hljs-keyword">for</span> score <span class="hljs-keyword">in</span> scores {
        <span class="hljs-keyword">if</span> score &gt; <span class="hljs-built_in">max</span> {
            <span class="hljs-built_in">max</span> = score
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> score &lt; <span class="hljs-built_in">min</span> {
            <span class="hljs-built_in">min</span> = score
        }
        sum += score
    }

    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">min</span>, <span class="hljs-built_in">max</span>, sum)
}
<span class="hljs-keyword">let</span> statistics = calculateStatistics([<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>])
<span class="hljs-built_in">print</span>(statistics.sum)
<span class="hljs-built_in">print</span>(statistics.<span class="hljs-number">2</span>)
</code></pre>
<p>函数可以带有可变个数的参数，这些参数在函数内表现为数组的形式：</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">sumOf</span><span class="hljs-params">(numbers: Int...)</span> -&gt; <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> numbers {
        sum += number
    }
    <span class="hljs-keyword">return</span> sum
}
sumOf()
sumOf(<span class="hljs-number">42</span>, <span class="hljs-number">597</span>, <span class="hljs-number">12</span>)
</code></pre>
<blockquote>
<p>练习：
写一个计算参数平均值的函数。</p>
</blockquote>
<p>函数可以嵌套。被嵌套的函数可以访问外侧函数的变量，你可以使用嵌套函数来重构一个太长或者太复杂的函数。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">returnFifteen</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">var</span> y = <span class="hljs-number">10</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>{
        y += <span class="hljs-number">5</span>
    }
    add()
    <span class="hljs-keyword">return</span> y
}
returnFifteen()
</code></pre>
<p>函数是第一等类型，这意味着函数可以作为另一个函数的返回值。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">makeIncrementer</span><span class="hljs-params">()</span> -&gt; <span class="hljs-params">(Int -&gt; Int)</span> </span>{
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">addOne</span><span class="hljs-params">(number: Int)</span> -&gt; <span class="hljs-title">Int</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + number
    }
    <span class="hljs-keyword">return</span> addOne
}
<span class="hljs-keyword">var</span> increment = makeIncrementer()
increment(<span class="hljs-number">7</span>)
</code></pre>
<p>函数也可以当做参数传入另一个函数。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">hasAnyMatches</span><span class="hljs-params">(list: [Int], condition: Int -&gt; Bool)</span> -&gt; <span class="hljs-title">Bool</span> </span>{
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list {
        <span class="hljs-keyword">if</span> condition(item) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">true</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">false</span>
}
<span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">lessThanTen</span><span class="hljs-params">(number: Int)</span> -&gt; <span class="hljs-title">Bool</span> </span>{
    <span class="hljs-keyword">return</span> number &lt; <span class="hljs-number">10</span>
}
<span class="hljs-keyword">var</span> numbers = [<span class="hljs-number">20</span>, <span class="hljs-number">19</span>, <span class="hljs-number">7</span>, <span class="hljs-number">12</span>]
hasAnyMatches(numbers, condition: lessThanTen)
</code></pre>
<p>函数实际上是一种特殊的闭包:它是一段能之后被调取的代码。闭包中的代码能访问闭包所建作用域中能得到的变量和函数，即使闭包是在一个不同的作用域被执行的 - 你已经在嵌套函数例子中所看到。你可以使用<code>{}</code>来创建一个匿名闭包。使用<code>in</code>将参数和返回值类型声明与闭包函数体进行分离。</p>
<pre><code class="lang-swift">numbers.<span class="hljs-built_in">map</span>({
    (number: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">let</span> result = <span class="hljs-number">3</span> * number
    <span class="hljs-keyword">return</span> result
})
</code></pre>
<blockquote>
<p>练习：
重写闭包，对所有奇数返回0。</p>
</blockquote>
<p>有很多种创建更简洁的闭包的方法。如果一个闭包的类型已知，比如作为一个回调函数，你可以忽略参数的类型和返回值。单个语句闭包会把它语句的值当做结果返回。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> mappedNumbers = numbers.<span class="hljs-built_in">map</span>({ number <span class="hljs-keyword">in</span> <span class="hljs-number">3</span> * number })
<span class="hljs-built_in">print</span>(mappedNumbers)
</code></pre>
<p>你可以通过参数位置而不是参数名字来引用参数——这个方法在非常短的闭包中非常有用。当一个闭包作为最后一个参数传给一个函数的时候，它可以直接跟在括号后面。当一个闭包是传给函数的唯一参数，你可以完全忽略括号。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> sortedNumbers = numbers.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span> &gt; $<span class="hljs-number">1</span> }
<span class="hljs-built_in">print</span>(sortedNumbers)
</code></pre>
<p><a name="objects_and_classes"></a></p>
<h2 id="">对象和类</h2>
<p>使用<code>class</code>和类名来创建一个类。类中属性的声明和常量、变量声明一样，唯一的区别就是它们的上下文是类。同样，方法和函数声明也一样。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-keyword">var</span> numberOfSides = <span class="hljs-number">0</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"A shape with <span class="hljs-subst">\(numberOfSides)</span> sides."</span>
    }
}
</code></pre>
<blockquote>
<p>练习：
使用<code>let</code>添加一个常量属性，再添加一个接收一个参数的方法。</p>
</blockquote>
<p>要创建一个类的实例，在类名后面加上括号。使用点语法来访问实例的属性和方法。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> shape = <span class="hljs-type">Shape</span>()
shape.numberOfSides = <span class="hljs-number">7</span>
<span class="hljs-keyword">var</span> shapeDescription = shape.simpleDescription()
</code></pre>
<p>这个版本的<code>Shape</code>类缺少了一些重要的东西：一个构造函数来初始化类实例。使用<code>init</code>来创建一个构造器。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NamedShape</span> </span>{
    <span class="hljs-keyword">var</span> numberOfSides: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>

    <span class="hljs-keyword">init</span>(name: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.name = name
    }

    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"A shape with <span class="hljs-subst">\(numberOfSides)</span> sides."</span>
    }
}
</code></pre>
<p>注意<code>self</code>被用来区别实例变量。当你创建实例的时候，像传入函数参数一样给类传入构造器的参数。每个属性都需要赋值——无论是通过声明（就像<code>numberOfSides</code>）还是通过构造器（就像<code>name</code>）。</p>
<p>如果你需要在删除对象之前进行一些清理工作，使用<code>deinit</code>创建一个析构函数。</p>
<p>子类的定义方法是在它们的类名后面加上父类的名字，用冒号分割。创建类的时候并不需要一个标准的根类，所以你可以忽略父类。</p>
<p>子类如果要重写父类的方法的话，需要用<code>override</code>标记——如果没有添加<code>override</code>就重写父类方法的话编译器会报错。编译器同样会检测<code>override</code>标记的方法是否确实在父类中。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span>: <span class="hljs-title">NamedShape</span> </span>{
    <span class="hljs-keyword">var</span> sideLength: <span class="hljs-type">Double</span>

    <span class="hljs-keyword">init</span>(sideLength: <span class="hljs-type">Double</span>, name: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.sideLength = sideLength
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(name: name)
        numberOfSides = <span class="hljs-number">4</span>
    }

    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> -&gt;  <span class="hljs-title">Double</span> </span>{
        <span class="hljs-keyword">return</span> sideLength * sideLength
    }

    <span class="hljs-keyword">override</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"A square with sides of length <span class="hljs-subst">\(sideLength)</span>."</span>
    }
}
<span class="hljs-keyword">let</span> test = <span class="hljs-type">Square</span>(sideLength: <span class="hljs-number">5.2</span>, name: <span class="hljs-string">"my test square"</span>)
test.area()
test.simpleDescription()
</code></pre>
<blockquote>
<p>练习：
创建<code>NamedShape</code>的另一个子类<code>Circle</code>，构造器接收两个参数，一个是半径一个是名称，在子类<code>Circle</code>中实现<code>area()</code>和<code>simpleDescription()</code>方法。</p>
</blockquote>
<p>除了储存简单的属性之外，属性可以有 getter 和 setter 。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EquilateralTriangle</span>: <span class="hljs-title">NamedShape</span> </span>{
    <span class="hljs-keyword">var</span> sideLength: <span class="hljs-type">Double</span> = <span class="hljs-number">0.0</span>

    <span class="hljs-keyword">init</span>(sideLength: <span class="hljs-type">Double</span>, name: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.sideLength = sideLength
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(name: name)
        numberOfSides = <span class="hljs-number">3</span>
    }

    <span class="hljs-keyword">var</span> perimeter: <span class="hljs-type">Double</span> {
        <span class="hljs-keyword">get</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-number">3.0</span> * sideLength
        }
        <span class="hljs-keyword">set</span> {
            sideLength = newValue / <span class="hljs-number">3.0</span>
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"An equilateral triagle with sides of length <span class="hljs-subst">\(sideLength)</span>."</span>
    }
}
<span class="hljs-keyword">var</span> triangle = <span class="hljs-type">EquilateralTriangle</span>(sideLength: <span class="hljs-number">3.1</span>, name: <span class="hljs-string">"a triangle"</span>)
<span class="hljs-built_in">print</span>(triangle.perimeter)
triangle.perimeter = <span class="hljs-number">9.9</span>
<span class="hljs-built_in">print</span>(triangle.sideLength)
</code></pre>
<p>在<code>perimeter</code>的 setter 中，新值的名字是<code>newValue</code>。你可以在<code>set</code>之后显式的设置一个名字。</p>
<p>注意<code>EquilateralTriangle</code>类的构造器执行了三步：</p>
<ol>
<li>设置子类声明的属性值</li>
<li>调用父类的构造器</li>
<li>改变父类定义的属性值。其他的工作比如调用方法、getters和setters也可以在这个阶段完成。</li>
</ol>
<p>如果你不需要计算属性，但是仍然需要在设置一个新值之前或者之后运行代码，使用<code>willSet</code>和<code>didSet</code>。</p>
<p>比如，下面的类确保三角形的边长总是和正方形的边长相同。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TriangleAndSquare</span> </span>{
    <span class="hljs-keyword">var</span> triangle: <span class="hljs-type">EquilateralTriangle</span> {
        <span class="hljs-keyword">willSet</span> {
            square.sideLength = newValue.sideLength
        }
    }
    <span class="hljs-keyword">var</span> square: <span class="hljs-type">Square</span> {
        <span class="hljs-keyword">willSet</span> {
            triangle.sideLength = newValue.sideLength
        }
    }
    <span class="hljs-keyword">init</span>(size: <span class="hljs-type">Double</span>, name: <span class="hljs-type">String</span>) {
        square = <span class="hljs-type">Square</span>(sideLength: size, name: name)
        triangle = <span class="hljs-type">EquilateralTriangle</span>(sideLength: size, name: name)
    }
}
<span class="hljs-keyword">var</span> triangleAndSquare = <span class="hljs-type">TriangleAndSquare</span>(size: <span class="hljs-number">10</span>, name: <span class="hljs-string">"another test shape"</span>)
<span class="hljs-built_in">print</span>(triangleAndSquare.square.sideLength)
<span class="hljs-built_in">print</span>(triangleAndSquare.triangle.sideLength)
triangleAndSquare.square = <span class="hljs-type">Square</span>(sideLength: <span class="hljs-number">50</span>, name: <span class="hljs-string">"larger square"</span>)
<span class="hljs-built_in">print</span>(triangleAndSquare.triangle.sideLength)
</code></pre>
<p>处理变量的可选值时，你可以在操作（比如方法、属性和子脚本）之前加<code>?</code>。如果<code>?</code>之前的值是<code>nil</code>，<code>?</code>后面的东西都会被忽略，并且整个表达式返回<code>nil</code>。否则，<code>?</code>之后的东西都会被运行。在这两种情况下，整个表达式的值也是一个可选值。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> optionalSquare: <span class="hljs-type">Square</span>? = <span class="hljs-type">Square</span>(sideLength: <span class="hljs-number">2.5</span>, name: <span class="hljs-string">"optional square"</span>)
<span class="hljs-keyword">let</span> sideLength = optionalSquare?.sideLength
</code></pre>
<p><a name="enumerations_and_structure"></a></p>
<h2 id="">枚举和结构体</h2>
<p>使用<code>enum</code>来创建一个枚举。就像类和其他所有命名类型一样，枚举可以包含方法。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Rank</span>: <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">Ace</span> = <span class="hljs-number">1</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">Two</span>, <span class="hljs-type">Three</span>, <span class="hljs-type">Four</span>, <span class="hljs-type">Five</span>, <span class="hljs-type">Six</span>, <span class="hljs-type">Seven</span>, <span class="hljs-type">Eight</span>, <span class="hljs-type">Nine</span>, <span class="hljs-type">Ten</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">Jack</span>, <span class="hljs-type">Queen</span>, <span class="hljs-type">King</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Ace</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ace"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Jack</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"jack"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Queen</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"queen"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">King</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"king"</span>
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>(<span class="hljs-keyword">self</span>.rawValue)
        }
    }
}
<span class="hljs-keyword">let</span> ace = <span class="hljs-type">Rank</span>.<span class="hljs-type">Ace</span>
<span class="hljs-keyword">let</span> aceRawValue = ace.rawValue
</code></pre>
<blockquote>
<p>练习：
写一个函数，通过比较它们的原始值来比较两个<code>Rank</code>值。</p>
</blockquote>
<p>默认情况下，Swift 按照从 0 开始每次加 1 的方式为原始值进行赋值，不过你可以通过显式赋值进行改变。在上面的例子中，<code>Ace</code>被显式赋值为 1，并且剩下的原始值会按照顺序赋值。你也可以使用字符串或者浮点数作为枚举的原始值。使用<code>rawValue</code>属性来访问一个枚举成员的原始值。</p>
<p>使用<code>init?(rawValue:)</code>初始化构造器在原始值和枚举值之间进行转换。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> convertedRank = <span class="hljs-type">Rank</span>(rawValue: <span class="hljs-number">3</span>) {
    <span class="hljs-keyword">let</span> threeDescription = convertedRank.simpleDescription()
}
</code></pre>
<p>枚举的成员值是实际值，并不是原始值的另一种表达方法。实际上，以防原始值没有意义，你不需要设置。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Suit</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">Spades</span>, <span class="hljs-type">Hearts</span>, <span class="hljs-type">Diamonds</span>, <span class="hljs-type">Clubs</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Spades</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"spades"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Hearts</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"hearts"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Diamonds</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"diamonds"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Clubs</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"clubs"</span>
        }
    }
}
<span class="hljs-keyword">let</span> hearts = <span class="hljs-type">Suit</span>.<span class="hljs-type">Hearts</span>
<span class="hljs-keyword">let</span> heartsDescription = hearts.simpleDescription()
</code></pre>
<blockquote>
<p>练习：
给<code>Suit</code>添加一个<code>color()</code>方法，对<code>spades</code>和<code>clubs</code>返回“black”，对<code>hearts</code>和<code>diamonds</code>返回“red”。</p>
</blockquote>
<p>注意，有两种方式可以引用<code>Hearts</code>成员：给<code>hearts</code>常量赋值时，枚举成员<code>Suit.Hearts</code>需要用全名来引用，因为常量没有显式指定类型。在<code>switch</code>里，枚举成员使用缩写<code>.Hearts</code>来引用，因为<code>self</code>的值已经知道是一个<code>suit</code>。已知变量类型的情况下你可以使用缩写。</p>
<p>使用<code>struct</code>来创建一个结构体。结构体和类有很多相同的地方，比如方法和构造器。它们之间最大的一个区别就是结构体是传值，类是传引用。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Card</span> </span>{
    <span class="hljs-keyword">var</span> rank: <span class="hljs-type">Rank</span>
    <span class="hljs-keyword">var</span> suit: <span class="hljs-type">Suit</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"The <span class="hljs-subst">\(rank.simpleDescription()</span>) of <span class="hljs-subst">\(suit.simpleDescription()</span>)"</span>
    }
}
<span class="hljs-keyword">let</span> threeOfSpades = <span class="hljs-type">Card</span>(rank: .<span class="hljs-type">Three</span>, suit: .<span class="hljs-type">Spades</span>)
<span class="hljs-keyword">let</span> threeOfSpadesDescription = threeOfSpades.simpleDescription()
</code></pre>
<blockquote>
<p>练习：
给<code>Card</code>添加一个方法，创建一副完整的扑克牌并把每张牌的 rank 和 suit 对应起来。</p>
</blockquote>
<p>一个枚举成员的实例可以有实例值。相同枚举成员的实例可以有不同的值。创建实例的时候传入值即可。实例值和原始值是不同的：枚举成员的原始值对于所有实例都是相同的，而且你是在定义枚举的时候设置原始值。</p>
<p>例如，考虑从服务器获取日出和日落的时间。服务器会返回正常结果或者错误信息。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">ServerResponse</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">Result</span>(<span class="hljs-type">String</span>, <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-type">Failure</span>(<span class="hljs-type">String</span>)
}

<span class="hljs-keyword">let</span> success = <span class="hljs-type">ServerResponse</span>.<span class="hljs-type">Result</span>(<span class="hljs-string">"6:00 am"</span>, <span class="hljs-string">"8:09 pm"</span>)
<span class="hljs-keyword">let</span> failure = <span class="hljs-type">ServerResponse</span>.<span class="hljs-type">Failure</span>(<span class="hljs-string">"Out of cheese."</span>)

<span class="hljs-keyword">switch</span> success {
<span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> .<span class="hljs-type">Result</span>(sunrise, sunset):
    <span class="hljs-keyword">let</span> serverResponse = <span class="hljs-string">"Sunrise is at <span class="hljs-subst">\(sunrise)</span> and sunset is at <span class="hljs-subst">\(sunset)</span>."</span>
<span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> .<span class="hljs-type">Failure</span>(message):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Failure...  <span class="hljs-subst">\(message)</span>"</span>)
}
</code></pre>
<blockquote>
<p>练习：
给<code>ServerResponse</code>和<code>switch</code>添加第三种情况。</p>
</blockquote>
<p>注意如何从<code>ServerResponse</code>中提取日升和日落时间并用得到的值用来和<code>switch</code>的情况作比较。</p>
<p><a name="protocols_and_extensions"></a></p>
<h2 id="">协议和扩展</h2>
<p>使用<code>protocol</code>来声明一个协议。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ExampleProtocol</span> </span>{
    <span class="hljs-keyword">var</span> simpleDescription: <span class="hljs-type">String</span> { <span class="hljs-keyword">get</span> }
    <span class="hljs-keyword">mutating</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">adjust</span><span class="hljs-params">()</span>
}</span>
</code></pre>
<p>类、枚举和结构体都可以实现协议。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleClass</span>: <span class="hljs-title">ExampleProtocol</span> </span>{
    <span class="hljs-keyword">var</span> simpleDescription: <span class="hljs-type">String</span> = <span class="hljs-string">"A very simple class."</span>
    <span class="hljs-keyword">var</span> anotherProperty: <span class="hljs-type">Int</span> = <span class="hljs-number">69105</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">adjust</span><span class="hljs-params">()</span> </span>{
        simpleDescription += <span class="hljs-string">"  Now 100% adjusted."</span>
    }
}
<span class="hljs-keyword">var</span> a = <span class="hljs-type">SimpleClass</span>()
a.adjust()
<span class="hljs-keyword">let</span> aDescription = a.simpleDescription

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SimpleStructure</span>: <span class="hljs-title">ExampleProtocol</span> </span>{
    <span class="hljs-keyword">var</span> simpleDescription: <span class="hljs-type">String</span> = <span class="hljs-string">"A simple structure"</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">adjust</span><span class="hljs-params">()</span> </span>{
        simpleDescription += <span class="hljs-string">" (adjusted)"</span>
    }
}
<span class="hljs-keyword">var</span> b = <span class="hljs-type">SimpleStructure</span>()
b.adjust()
<span class="hljs-keyword">let</span> bDescription = b.simpleDescription
</code></pre>
<blockquote>
<p>练习：
写一个实现这个协议的枚举。</p>
</blockquote>
<p>注意声明<code>SimpleStructure</code>时候<code>mutating</code>关键字用来标记一个会修改结构体的方法。<code>SimpleClass</code>的声明不需要标记任何方法，因为类中的方法通常可以修改类属性（类的性质）。</p>
<p>使用<code>extension</code>来为现有的类型添加功能，比如新的方法和计算属性。你可以使用扩展在别处修改定义，甚至是从外部库或者框架引入的一个类型，使得这个类型遵循某个协议。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">Int</span>: <span class="hljs-title">ExampleProtocol</span> </span>{
    <span class="hljs-keyword">var</span> simpleDescription: <span class="hljs-type">String</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"The number <span class="hljs-subst">\(<span class="hljs-keyword">self</span>)</span>"</span>
    }
    <span class="hljs-keyword">mutating</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">adjust</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">self</span> += <span class="hljs-number">42</span>
    }
}
<span class="hljs-built_in">print</span>(<span class="hljs-number">7</span>.simpleDescription)
</code></pre>
<blockquote>
<p>练习：
给<code>Double</code>类型写一个扩展，添加<code>absoluteValue</code>功能。</p>
</blockquote>
<p>你可以像使用其他命名类型一样使用协议名——例如，创建一个有不同类型但是都实现一个协议的对象集合。当你处理类型是协议的值时，协议外定义的方法不可用。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span><span class="hljs-title">Value</span>: <span class="hljs-title">ExampleProtocol</span> = <span class="hljs-title">a</span>
<span class="hljs-title">print</span>(<span class="hljs-title">protocolValue</span>.<span class="hljs-title">simpleDescription</span>)
// <span class="hljs-title">print</span>(<span class="hljs-title">protocolValue</span>.<span class="hljs-title">anotherProperty</span>)  // <span class="hljs-title">Uncomment</span> <span class="hljs-title">to</span> <span class="hljs-title">see</span> <span class="hljs-title">the</span> <span class="hljs-title">error</span></span>
</code></pre>
<p>即使<code>protocolValue</code>变量运行时的类型是<code>simpleClass</code>，编译器会把它的类型当做<code>ExampleProtocol</code>。这表示你不能调用类在它实现的协议之外实现的方法或者属性。</p>
<p><a name="error_handling"></a></p>
<h2 id="">错误处理</h2>
<p>使用采用<code>ErrorType</code>协议的类型来表示错误。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">PrinterError</span>: <span class="hljs-title">ErrorType</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">OutOfPaper</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">NoToner</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">OnFire</span>
}
</code></pre>
<p>使用<code>throw</code>来抛出一个错误并使用<code>throws</code>来表示一个可以抛出错误的函数。如果在函数中抛出一个错误，这个函数会立刻返回并且调用该函数的代码会进行错误处理。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">sendToPrinter</span><span class="hljs-params">(printerName: String)</span> <span class="hljs-title">throws</span> -&gt; <span class="hljs-title">String</span> </span>{
    <span class="hljs-keyword">if</span> printerName == <span class="hljs-string">"Never Has Toner"</span> {
        throw <span class="hljs-type">PrinterError</span>.<span class="hljs-type">NoToner</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Job sent"</span>
}
</code></pre>
<p>有多种方式可以用来进行错误处理。一种方式是使用<code>do-catch</code>。在<code>do</code>代码块中，使用<code>try</code>来标记可以抛出错误的代码。在<code>catch</code>代码块中，除非你另外命名，否则错误会自动命名为<code>error</code>。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">do</span> {
    <span class="hljs-keyword">let</span> printerResponse = try sendToPrinter(<span class="hljs-string">"Bi Sheng"</span>)
    <span class="hljs-built_in">print</span>(printerResponse)
} catch {
    <span class="hljs-built_in">print</span>(error)
}
</code></pre>
<blockquote>
<p>练习：
将 printer name 改为<code>&quot;Never Has Toner&quot;</code>使<code>sendToPrinter(_:)</code>函数抛出错误。</p>
</blockquote>
<p>可以使用多个<code>catch</code>块来处理特定的错误。参照 switch 中的<code>case</code>风格来写<code>catch</code>。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">do</span> {
    <span class="hljs-keyword">let</span> printerResponse = try sendToPrinter(<span class="hljs-string">"Gutenberg"</span>)
    <span class="hljs-built_in">print</span>(printerResponse)
} catch <span class="hljs-type">PrinterError</span>.<span class="hljs-type">OnFire</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I'll just put this over here, with the rest of the fire."</span>)
} catch <span class="hljs-keyword">let</span> printerError <span class="hljs-keyword">as</span> <span class="hljs-type">PrinterError</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Printer error: <span class="hljs-subst">\(printerError)</span>."</span>)
} catch {
    <span class="hljs-built_in">print</span>(error)
}
</code></pre>
<blockquote>
<p>练习：
在<code>do</code>代码块中添加抛出错误的代码。你需要抛出哪种错误来使第一个<code>catch</code>块进行接收？怎么使第二个和第三个<code>catch</code>进行接收呢？</p>
</blockquote>
<p>另一种处理错误的方式使用<code>try?</code>将结果转换为可选的。如果函数抛出错误，该错误会被抛弃并且结果为<code>nil</code>。否则的话，结果会是一个包含函数返回值的可选值。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> printerSuccess = try? sendToPrinter(<span class="hljs-string">"Mergenthaler"</span>)
<span class="hljs-keyword">let</span> printerFailure = try? sendToPrinter(<span class="hljs-string">"Never Has Toner"</span>)
</code></pre>
<p>使用<code>defer</code>代码块来表示在函数返回前，函数中最后执行的代码。无论函数是否会抛出错误，这段代码都将执行。使用<code>defer</code>，可以把函数调用之初就要执行的代码和函数调用结束时的扫尾代码写在一起，虽然这两者的执行时机截然不同。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> fridgeIsOpen = <span class="hljs-built_in">false</span>
<span class="hljs-keyword">let</span> fridgeContent = [<span class="hljs-string">"milk"</span>, <span class="hljs-string">"eggs"</span>, <span class="hljs-string">"leftovers"</span>]

<span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">fridgeContains</span><span class="hljs-params">(itemName: String)</span> -&gt; <span class="hljs-title">Bool</span> </span>{
    fridgeIsOpen = <span class="hljs-built_in">true</span>
    defer {
        fridgeIsOpen = <span class="hljs-built_in">false</span>
    }

    <span class="hljs-keyword">let</span> result = fridgeContent.<span class="hljs-built_in">contains</span>(itemName)
    <span class="hljs-keyword">return</span> result
}
fridgeContains(<span class="hljs-string">"banana"</span>)
<span class="hljs-built_in">print</span>(fridgeIsOpen)
</code></pre>
<p><a name="generics"></a></p>
<h2 id="">泛型</h2>
<p>在尖括号里写一个名字来创建一个泛型函数或者类型。</p>
<pre><code class="lang-swift">func repeatItem&lt;Item&gt;(item: Item, numberOfTimes: Int) -&gt; [Item] {
    var result = [Item]()
    for _ in 0..&lt;numberOfTimes {
        result.append(item)
    }
    return result
}
repeatItem("knock", numberOfTimes:4)
</code></pre>
<p>你也可以创建泛型函数、方法、类、枚举和结构体。</p>
<pre><code class="lang-swift"><span class="hljs-comment">// Reimplement the Swift standard library's optional type</span>
<span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">OptionalValue</span>&lt;<span class="hljs-title">Wrapped</span>&gt; </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">None</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">Some</span>(<span class="hljs-type">Wrapped</span>)
}
<span class="hljs-keyword">var</span> possibleInteger: <span class="hljs-type">OptionalValue</span>&lt;<span class="hljs-type">Int</span>&gt; = .<span class="hljs-type">None</span>
possibleInteger = .<span class="hljs-type">Some</span>(<span class="hljs-number">100</span>)
</code></pre>
<p>在类型名后面使用<code>where</code>来指定对类型的需求，比如，限定类型实现某一个协议，限定两个类型是相同的，或者限定某个类必须有一个特定的父类。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">anyCommonElements</span> <span class="hljs-generics">&lt;T: SequenceType, U: SequenceType where T.Generator.Element: Equatable, T.Generator.Element == U.Generator.Element&gt;</span> <span class="hljs-params">(lhs: T, <span class="hljs-number">_</span> rhs: U)</span> -&gt; <span class="hljs-title">Bool</span> </span>{
    <span class="hljs-keyword">for</span> lhsItem <span class="hljs-keyword">in</span> lhs {
        <span class="hljs-keyword">for</span> rhsItem <span class="hljs-keyword">in</span> rhs {
            <span class="hljs-keyword">if</span> lhsItem == rhsItem {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">true</span>
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">false</span>
}
anyCommonElements([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">3</span>])
</code></pre>
<blockquote>
<p>练习：
修改<code>anyCommonElements(_:_:)</code>函数来创建一个函数，返回一个数组，内容是两个序列的共有元素。</p>
</blockquote>
<p><code>&lt;T: Equatable&gt;</code>和<code>&lt;T where T: Equatable&gt;</code>是等价的。</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../chapter1/01_swift.html" class="navigation navigation-prev " aria-label="Previous page: 关于 Swift"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../chapter1/03_revision_history.html" class="navigation navigation-next " aria-label="Next page: Swift 版本历史记录"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
